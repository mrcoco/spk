<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluasi FIS - SPK Monitoring Masa Studi</title>
    
    <!-- Environment Variables -->
    <meta name="env-API_BASE_URL" content="http://localhost:8000">
    <meta name="env-API_PREFIX" content="/api">
    <meta name="env-API_VERSION" content="v1">
    <meta name="env-APP_NAME" content="SPK Monitoring Masa Studi">
    <meta name="env-APP_VERSION" content="1.0.0">
    <meta name="env-ENVIRONMENT" content="development">
    <meta name="env-DEBUG" content="true">
    
    <!-- jQuery -->
    <script src="js/jquery/jquery-3.6.0.min.js"></script>
    
    <!-- Kendo UI -->
    <link href="styles/kendo.common-bootstrap.min.css" rel="stylesheet">
    <link href="styles/kendo.bootstrap-v4.min.css" rel="stylesheet">
    <script src="js/kendo.all.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="styles/font-awesome/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Custom JS -->
    <script src="js/env-loader.js"></script>
    <script src="js/env-updater.js"></script>
    <script src="js/config.js"></script>
    <script src="js/evaluation.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>
                <i class="fas fa-chart-line"></i>
                Evaluasi Metode FIS (Fuzzy Inference System)
            </h1>
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Kembali ke Dashboard
            </a>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <div class="content-wrapper">
            <div class="content-container">
                
                <!-- Loading Indicator -->
                <div id="loadingIndicator" class="loading-container" style="display: none;">
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p>Sedang menghitung evaluasi FIS...</p>
                </div>

                <!-- Control Panel -->
                <div class="control-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-cogs"></i> Pengaturan Evaluasi FIS</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="testSize">Ukuran Data Test (%):</label>
                                    <input type="number" id="testSize" value="30" min="10" max="50" class="form-control">
                                    <small class="form-text">Persentase data yang digunakan untuk testing (10-50%)</small>
                                </div>
                                <div class="form-group">
                                    <label for="randomState">Random State:</label>
                                    <input type="number" id="randomState" value="42" class="form-control">
                                    <small class="form-text">Seed untuk reproduksi hasil yang konsisten</small>
                                </div>
                                <div class="form-group">
                                    <button id="calculateBtn" class="btn btn-primary">
                                        <i class="fas fa-calculator"></i>
                                        Hitung Evaluasi FIS
                                    </button>
                                </div>
                            </div>
                            <div class="info-box">
                                <h4><i class="fas fa-info-circle"></i> Informasi Evaluasi</h4>
                                <p>Evaluasi ini akan mengukur performa dan keakuratan metode FIS dalam mengklasifikasikan peluang kelulusan mahasiswa berdasarkan kriteria IPK, SKS, dan persentase nilai D/E/K.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="evaluation-section">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-info-circle"></i> Ringkasan Evaluasi</h3>
                        </div>
                        <div class="card-body">
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <div class="summary-icon">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>Total Data</h4>
                                        <span id="totalData">-</span>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon">
                                        <i class="fas fa-graduation-cap"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>Training Data</h4>
                                        <span id="trainingData">-</span>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon">
                                        <i class="fas fa-flask"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>Test Data</h4>
                                        <span id="testData">-</span>
                                    </div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>Waktu Eksekusi</h4>
                                        <span id="executionTime">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confusion Matrix Section -->
                <div class="evaluation-section">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-table"></i> Confusion Matrix</h3>
                        </div>
                        <div class="card-body">
                            <div id="confusionMatrixContainer">
                                <div class="confusion-matrix">
                                    <table class="confusion-table">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th colspan="3">Predicted</th>
                                            </tr>
                                            <tr>
                                                <th>Actual</th>
                                                <th>Peluang Lulus Tinggi</th>
                                                <th>Peluang Lulus Sedang</th>
                                                <th>Peluang Lulus Kecil</th>
                                            </tr>
                                        </thead>
                                        <tbody id="confusionMatrixBody">
                                            <tr>
                                                <td><strong>Peluang Lulus Tinggi</strong></td>
                                                <td id="cm-0-0">-</td>
                                                <td id="cm-0-1">-</td>
                                                <td id="cm-0-2">-</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Peluang Lulus Sedang</strong></td>
                                                <td id="cm-1-0">-</td>
                                                <td id="cm-1-1">-</td>
                                                <td id="cm-1-2">-</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Peluang Lulus Kecil</strong></td>
                                                <td id="cm-2-0">-</td>
                                                <td id="cm-2-1">-</td>
                                                <td id="cm-2-2">-</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Evaluation Metrics Section -->
                <div class="evaluation-section">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-bar"></i> Evaluation Metrics</h3>
                        </div>
                        <div class="card-body">
                            <div class="metrics-grid">
                                <!-- Overall Metrics -->
                                <div class="metrics-card overall">
                                    <h4><i class="fas fa-chart-pie"></i> Overall Metrics</h4>
                                    <div class="metric-item">
                                        <span class="metric-label">Accuracy:</span>
                                        <span class="metric-value" id="accuracy">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Precision (Macro):</span>
                                        <span class="metric-value" id="precision-macro">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Recall (Macro):</span>
                                        <span class="metric-value" id="recall-macro">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">F1-Score (Macro):</span>
                                        <span class="metric-value" id="f1-macro">-</span>
                                    </div>
                                </div>

                                <!-- Per-Class Metrics -->
                                <div class="metrics-card per-class">
                                    <h4><i class="fas fa-list"></i> Per-Class Metrics</h4>
                                    <div class="class-metrics">
                                        <div class="class-metric">
                                            <h5><i class="fas fa-star" style="color: #28a745;"></i> Peluang Lulus Tinggi</h5>
                                            <div class="metric-item">
                                                <span class="metric-label">Precision:</span>
                                                <span class="metric-value" id="precision-0">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">Recall:</span>
                                                <span class="metric-value" id="recall-0">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">F1-Score:</span>
                                                <span class="metric-value" id="f1-0">-</span>
                                            </div>
                                        </div>
                                        <div class="class-metric">
                                            <h5><i class="fas fa-star" style="color: #ffc107;"></i> Peluang Lulus Sedang</h5>
                                            <div class="metric-item">
                                                <span class="metric-label">Precision:</span>
                                                <span class="metric-value" id="precision-1">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">Recall:</span>
                                                <span class="metric-value" id="recall-1">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">F1-Score:</span>
                                                <span class="metric-value" id="f1-1">-</span>
                                            </div>
                                        </div>
                                        <div class="class-metric">
                                            <h5><i class="fas fa-star" style="color: #dc3545;"></i> Peluang Lulus Kecil</h5>
                                            <div class="metric-item">
                                                <span class="metric-label">Precision:</span>
                                                <span class="metric-value" id="precision-2">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">Recall:</span>
                                                <span class="metric-value" id="recall-2">-</span>
                                            </div>
                                            <div class="metric-item">
                                                <span class="metric-label">F1-Score:</span>
                                                <span class="metric-value" id="f1-2">-</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="evaluation-section">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Visualisasi Hasil</h3>
                        </div>
                        <div class="card-body">
                            <div class="charts-grid">
                                <div class="chart-container">
                                    <h4>Confusion Matrix Heatmap</h4>
                                    <canvas id="confusionMatrixChart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <h4>Metrics Comparison</h4>
                                    <canvas id="metricsChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interpretation Section -->
                <div class="evaluation-section">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-lightbulb"></i> Interpretasi Hasil</h3>
                        </div>
                        <div class="card-body">
                            <div id="interpretationContent">
                                <div class="interpretation-item">
                                    <h4><i class="fas fa-info-circle"></i> Tentang Evaluasi</h4>
                                    <p>Evaluasi ini mengukur seberapa baik metode FIS dalam mengklasifikasikan peluang kelulusan mahasiswa. Semakin tinggi nilai accuracy, precision, recall, dan F1-score, semakin baik performa model.</p>
                                </div>
                                <div class="interpretation-item">
                                    <h4><i class="fas fa-chart-bar"></i> Metrik Evaluasi</h4>
                                    <ul>
                                        <li><strong>Accuracy:</strong> Proporsi prediksi yang benar dari total prediksi</li>
                                        <li><strong>Precision:</strong> Proporsi prediksi positif yang benar</li>
                                        <li><strong>Recall:</strong> Proporsi kasus positif yang berhasil diprediksi</li>
                                        <li><strong>F1-Score:</strong> Rata-rata harmonik dari precision dan recall</li>
                                    </ul>
                                </div>
                                <div class="interpretation-item">
                                    <h4><i class="fas fa-exclamation-triangle"></i> Catatan Penting</h4>
                                    <p>Hasil evaluasi ini menggunakan ground truth yang dibuat berdasarkan kriteria sederhana. Untuk evaluasi yang lebih akurat, diperlukan data historis kelulusan mahasiswa yang sebenarnya.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <script>
        // Initialize evaluation page
        $(document).ready(function() {
            console.log('🚀 Evaluation page loaded');
            
            // Initialize evaluation functionality
            if (typeof initializeEvaluation === 'function') {
                initializeEvaluation();
            } else {
                console.error('❌ initializeEvaluation function not found');
            }
        });
    </script>
</body>
</html> 